<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Podcast Upload Test</title>
    <style>
        form {
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <form id="form" action="javascript:void(0);" enctype="multipart/form-data">
        <div class="form-group">
            <label for="file">Select Audio File:</label>
            <input type="file" id="file" name="podcast" accept="audio/*" required>
        </div>
        <div>
            <label for="file">Select Image File:</label>
            <input type="file" id="file" name="cover" accept="image/*" required>
        </div>
        <div class="form-group">
            <label for="title">Podcast Title:</label>
            <input type="text" id="title" name="title" required>
        </div>
        <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" name="description" rows="4"></textarea>
        </div>
        <button type="submit">Upload Podcast</button>
    </form>
</body>

<script>
    const form = document.getElementById("form");

    form.addEventListener("submit", async function (event) {
        event.preventDefault();  // Prevent form submission

        try {
            const formData = new FormData(this);
            const response = await fetch("http://localhost:8000/api/podcasts", {
                method: "POST",
                body: formData
            });

            if (response.ok) {
                alert("Podcast uploaded successfully!");
                form.reset(); // Clear form after successful upload
            } else {
                const error = await response.json();
                alert(`Upload failed: ${error.message || 'Unknown error'}`);
            }
        } catch (error) {
            console.error('Upload error:', error);
            alert('Upload failed: Network error');
        }
    });
</script>

</html>